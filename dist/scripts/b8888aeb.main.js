(function(){window.PONG={},window.onload=function(){var a,b,c,d;return c=document.getElementById("start-button"),window.animate=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},a=document.createElement("canvas"),document.body.appendChild(a),PONG.keysDown={},d=400,b=600,a.width=d,a.height=b,PONG.context=a.getContext("2d"),PONG.player=new PONG.Player(175,580,50,10),PONG.computer=new PONG.Computer(175,10,50,10),PONG.ball=new PONG.Ball(200,300),window.addEventListener("keydown",function(a){return PONG.keysDown[a.keyCode]=!0}),window.addEventListener("keyup",function(a){return delete PONG.keysDown[a.keyCode]}),c.addEventListener("click",function(a){return window.animate(PONG.step)})}}).call(this),function(){PONG.Paddle=function(){function a(a,b,c,d){var e;e=[a,b,c,d,0],this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3],this.x_speed=e[4]}return a.prototype.render=function(){return PONG.context.fillStyle="#001f3f",PONG.context.fillRect(this.x,this.y,this.width,this.height)},a.prototype.move=function(a){return this.x+=a,this.x_speed=a,this.x<0?(this.x=0,this.x_speed=0):this.x+this.width>400?(this.x=400-this.width,this.x_speed=0):void 0},a}()}.call(this),function(){PONG.Player=function(){function a(a,b,c,d){this.paddle=new PONG.Paddle(a,b,c,d,0),this.score=0}return a.prototype.render=function(){return this.paddle.render(),PONG.context.font="16px Avenir",PONG.context.fillStyle="#fff",PONG.context.fillText("Player: "+this.score,10,590)},a.prototype.update=function(){var a,b,c;b=[];for(a in PONG.keysDown)c=Number(a),b.push(37===c?this.paddle.move(-4):39===c?this.paddle.move(4):this.paddle.move(0));return b},a}()}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;PONG.Computer=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.render=function(){return this.paddle.render(),PONG.context.font="16px Avenir",PONG.context.fillStyle="#fff",PONG.context.fillText("Computer: "+this.score,10,20)},c.prototype.update=function(a){var b,c;return c=a.x,b=-(this.paddle.x+this.paddle.width/2-c),-4>b?b=-5:b>4&&(b=5),this.paddle.move(b,0)},c}(PONG.Player)}.call(this),function(){PONG.Ball=function(){function a(a,b){var c;c=[a,b,0,3,5],this.x=c[0],this.y=c[1],this.x_speed=c[2],this.y_speed=c[3],this.radius=c[4]}return a.prototype.render=function(){return PONG.context.beginPath(),PONG.context.arc(this.x,this.y,this.radius,2*Math.PI,!1),PONG.context.fillStyle="#fff",PONG.context.fill()},a.prototype.update=function(a,b){var c,d,e,f,g,h,i,j,k;if(this.x+=this.x_speed,this.y+=this.y_speed,e=[this.x-5,this.y-5,this.x+5,this.y+5],j=e[0],k=e[1],c=e[2],d=e[3],this.x-5<0?(f=[5,-this.x_speed],this.x=f[0],this.x_speed=f[1]):this.x+5>400&&(g=[395,-this.x_speed],this.x=g[0],this.x_speed=g[1]),this.y<0?(h=[200,300,0,3],this.x=h[0],this.y=h[1],this.x_speed=h[2],this.y_speed=h[3],PONG.player.score+=1):this.y>600&&(i=[200,300,0,3],this.x=i[0],this.y=i[1],this.x_speed=i[2],this.y_speed=i[3],PONG.computer.score+=1),k>300){if(k<a.y+a.height&&d>a.y&&j<a.x+a.width&&c>a.x)return this.y_speed=-3,this.x_speed+=a.x_speed/2,this.y+=this.y_speed}else if(k<b.y+b.height&&d>b.y&&j<b.x+b.width&&c>b.x)return this.y_speed=3,this.x_speed+=b.x_speed/2,this.y+=this.y_speed},a}()}.call(this),function(){PONG.step=function(){return PONG.update(),PONG.render(),21===PONG.computer.score&&(alert("Game Over - Computer Won!"),PONG.player.score=0,PONG.computer.score=0),21===PONG.player.score&&(alert("Game Over - You Won!"),PONG.player.score=0,PONG.computer.score=0),21!==PONG.computer.score&&21!==PONG.player.score?window.animate(PONG.step):void 0},PONG.update=function(){return PONG.player.update(),PONG.computer.update(PONG.ball),PONG.ball.update(PONG.player.paddle,PONG.computer.paddle)},PONG.render=function(){return PONG.context.fillStyle="#0074D9",PONG.context.fillRect(0,0,400,600),PONG.player.render(),PONG.computer.render(),PONG.ball.render()}}.call(this);